# safecast -- Safe Numeric Type Cast Library For Go

[English](README.md) | 简体中文

[![License Apache 2.0](https://img.shields.io/badge/License-Apache_2.0-red.svg)](COPYING)
[![Python](https://img.shields.io/badge/Language-go1.18+-blue.svg)](https://www.python.org/)
![Build Status](https://github.com/chen3feng/safecast/actions/workflows/go.yml/badge.svg)
[![Coverage Status](https://coveralls.io/repos/github/chen3feng/safecast/badge.svg?branch=master)](https://coveralls.io/github/chen3feng/safecast?branch=master)
[![GoReport](https://goreportcard.com/badge/github.com/securego/gosec)](https://goreportcard.com/report/github.com/chen3feng/safecast)
[![Go Reference](https://pkg.go.dev/badge/github.com/chen3feng/safecast.svg)](https://pkg.go.dev/github.com/chen3feng/safecast)

安全的数值类型转换库。支持除了 `uintptr` 外的所有整数和浮点数类型。

用法：

```go
val, ok := To[type](value)
```

`ok == false` 表示值溢出。但是无论成功失败，`val` 都等效于直接用普通类型转换（`type(value)`）的结果。

另外也有目标类型非参数化的形式：

```go
val, ok := ToInt32(value)
```

用法同全泛型版本，并且性能上会好一些。

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# safecast

```go
import "github.com/chen3feng/safecast"
```

Package safecast provide a safe way to cast a numeric value from type A to type B, with overflow and underflow check.

## Index

- [func To[ToType numericType, FromType numericType](value FromType) (result ToType, ok bool)](<#func-to>)
- [func ToFloat32[F numericType](value F) (float32, bool)](<#func-tofloat32>)
- [func ToFloat64[F numericType](value F) (float64, bool)](<#func-tofloat64>)
- [func ToInt[F numericType](value F) (int, bool)](<#func-toint>)
- [func ToInt16[F numericType](value F) (int16, bool)](<#func-toint16>)
- [func ToInt32[F numericType](value F) (int32, bool)](<#func-toint32>)
- [func ToInt64[F numericType](value F) (int64, bool)](<#func-toint64>)
- [func ToInt8[F numericType](value F) (int8, bool)](<#func-toint8>)
- [func ToUint[F numericType](value F) (uint, bool)](<#func-touint>)
- [func ToUint16[F numericType](value F) (uint16, bool)](<#func-touint16>)
- [func ToUint32[F numericType](value F) (uint32, bool)](<#func-touint32>)
- [func ToUint64[F numericType](value F) (uint64, bool)](<#func-touint64>)
- [func ToUint8[F numericType](value F) (uint8, bool)](<#func-touint8>)


## func [To](<https://github.com/chen3feng/safecast/blob/master/generics.go#L12>)

```go
func To[ToType numericType, FromType numericType](value FromType) (result ToType, ok bool)
```

To converts a numeric value from the FromType to the specified ToType type safely. result will always be same as the usual type cast \(type\(value\)\), but ok is false when overflow or underflow occured.

<details><summary>Example (Float Overflow)</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/chen3feng/safecast"
	"math"
)

func main() {
	n, ok := safecast.To[float32](math.MaxFloat32 * 2)
	fmt.Print(n, ok)
}
```

#### Output

```
+Inf false
```

</p>
</details>

<details><summary>Example (Int No Overflow)</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/chen3feng/safecast"
)

func main() {
	b, ok := safecast.To[byte](255)
	fmt.Print(b, ok)
}
```

#### Output

```
255 true
```

</p>
</details>

<details><summary>Example (Int Overflow)</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/chen3feng/safecast"
)

func main() {
	b, ok := safecast.To[byte](256)
	fmt.Print(b, ok)
}
```

#### Output

```
0 false
```

</p>
</details>

<details><summary>Example (Value In Range)</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/chen3feng/safecast"
)

func main() {
	n, ok := safecast.To[uint](1)
	fmt.Print(n, ok)
}
```

#### Output

```
1 true
```

</p>
</details>

<details><summary>Example (Value Out Of Range)</summary>
<p>

```go
package main

import (
	"fmt"
	"github.com/chen3feng/safecast"
)

func main() {
	n, ok := safecast.To[uint32](-1)
	fmt.Print(n, ok)
}
```

#### Output

```
4294967295 false
```

</p>
</details>

## func [ToFloat32](<https://github.com/chen3feng/safecast/blob/master/generics.go#L365>)

```go
func ToFloat32[F numericType](value F) (float32, bool)
```

## func [ToFloat64](<https://github.com/chen3feng/safecast/blob/master/generics.go#L396>)

```go
func ToFloat64[F numericType](value F) (float64, bool)
```

## func [ToInt](<https://github.com/chen3feng/safecast/blob/master/generics.go#L179>)

```go
func ToInt[F numericType](value F) (int, bool)
```

## func [ToInt16](<https://github.com/chen3feng/safecast/blob/master/generics.go#L86>)

```go
func ToInt16[F numericType](value F) (int16, bool)
```

## func [ToInt32](<https://github.com/chen3feng/safecast/blob/master/generics.go#L117>)

```go
func ToInt32[F numericType](value F) (int32, bool)
```

## func [ToInt64](<https://github.com/chen3feng/safecast/blob/master/generics.go#L148>)

```go
func ToInt64[F numericType](value F) (int64, bool)
```

## func [ToInt8](<https://github.com/chen3feng/safecast/blob/master/generics.go#L55>)

```go
func ToInt8[F numericType](value F) (int8, bool)
```

## func [ToUint](<https://github.com/chen3feng/safecast/blob/master/generics.go#L334>)

```go
func ToUint[F numericType](value F) (uint, bool)
```

## func [ToUint16](<https://github.com/chen3feng/safecast/blob/master/generics.go#L241>)

```go
func ToUint16[F numericType](value F) (uint16, bool)
```

## func [ToUint32](<https://github.com/chen3feng/safecast/blob/master/generics.go#L272>)

```go
func ToUint32[F numericType](value F) (uint32, bool)
```

## func [ToUint64](<https://github.com/chen3feng/safecast/blob/master/generics.go#L303>)

```go
func ToUint64[F numericType](value F) (uint64, bool)
```

## func [ToUint8](<https://github.com/chen3feng/safecast/blob/master/generics.go#L210>)

```go
func ToUint8[F numericType](value F) (uint8, bool)
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->
